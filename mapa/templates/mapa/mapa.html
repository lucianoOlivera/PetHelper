{% extends 'base/base.html' %} {% block page_content %}

<!-- Begin Page Content -->
<div class="container-fluid">

    <!-- Page Heading -->
    <h1 class="h3 mb-4 text-gray-800">Mapa</h1>

    <div>
        <h6> Realice su búsqueda: </h6>
        <div class="container" id="container-button">
            <div class="text-center">
                <div class="dropdown">
                    <button class="btn btn-secondary text-gray-100 dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                       Profesionales
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="max-width: 100%">
                        <a class="dropdown-item" href="{% url 'organizaciones:profesionales_list' %}?order=independientes">Independientes</a>
                        <a class="dropdown-item" href="{% url 'organizaciones:profesionales_list' %}?order=clinicas">Clínicas</a>
                    </div>
                </div>
                <br>

                <button class="btn btn-secondary text-gray-100" type="button">
                    Organizaciones
                 </button>
                <br>
            </div>
        </div><br> 
    </div>
    <div id='map' style='width: 100%; height: 400px;'></div>
    <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoibWFyaWFsdXoiLCJhIjoiY2t2OG9jZmlhOXdtYjJvcWprYjhqOTFpaSJ9.vYDuCmCvJtO_hA6gYRUa5A';
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        style: 'mapbox://styles/mapbox/streets-v11', // style URL
        center: [-68.8472, -32.8903], // starting position [lng, lat]
        zoom: 12 // starting zoom
    });
    // Create a new marker.
    {% for direccion in direcciones %}
    const marker = new mapboxgl.Marker()
        .setLngLat([{{ direccion.longitud }}, {{ direccion.latitud }}])
        .addTo(map);
    {% endfor %}
    </script>

</div>

{% endblock %}


{% extends 'base/base.html' %} {% block page_content %}

<!-- Begin Page Content -->
<div class="container-fluid">

    <!-- Page Heading -->
    <h1 class="h3 mb-4 text-gray-800">Listado de donaciones para realizar</h1>

        <!--Page content-->

        <div class="container" id="container-button">
            <div class="text-center">
                <div class="dropdown">
                    <button class="btn btn-primary btn-user bg-gradient-primary text-gray-100 dropdown-toggle" style="float: right;margin-bottom: 5px;" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Crear nueva solicitud de donación
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="max-width: 100%">
                        <a class="dropdown-item" href="">Solicitud Monetaria</a>
                        <a class="dropdown-item" href="{% url 'solicitud:solicitud_insumo_new' %}">Solicitud de Insumos</a>
                      </div>
                </div>
                <br>
            </div>
        </div><br> 
        
        {% if not solicitudes_monetarias and not solicitudes_insumos %}
        <div class="alert alert-warning" role="alert">No hay solicitudes</div>
        {% else %}
        <div class="card-deck">
            {% for solicitud_insumo in solicitudes_insumos %}
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h5 class="m-0 font-weight-bold text-gray-800">{{solicitud_insumo.titulo}}</h5>
                    <h6 class="card-subtitle">Donación de Insumos</h6>
                </div>
                <div class="card-body">
                    <div id="Foto">
                        {{ solicitud_insumo.pedido }}

                    </div>
                    <div id="Destinatario">
                        <label class="text-gray-900"> Destinatario:  </label>
                        {% if solicitud_insumo.uc.username and solicitud_insumo.uc.apellido %}
                        <label >{{ solicitud_insumo.uc.username}} {{ solicitud_insumo.uc.apellido }} </label>
                        {% else %}
                        <label >{{ solicitud_insumo.uc.username}}</label>
                        {% endif %}
                        {% if solicitud_insumo.uc.telefono %}
                        <br><label class="text-gray-900"> Telefono:  </label>
                        <label >{{ solicitud_insumo.uc.telefono }}</label>
                        {% else %}
                        <br><label class="text-gray-900"> Email:  </label>
                        <label >{{ solicitud_insumo.uc.email }}</label>
                        {% endif %}
                    </div> 
                    <div id= "cantidad_recaudada">
                        <label class="text-gray-900"> Cantidad a recaudar:  </label>
                        {%  for cantidad_insumo in cantidades_insumos %}
                            {% if solicitud_insumo.id == cantidad_insumo.solicitud_insumo.id %}
                                <ul>
                                    <li>{{ cantidad_insumo.cantidad }} {{ cantidad_insumo.insumo.nombre }}</li>
                                </ul>
                            {% endif %}
                        {% endfor %}
                    </div>
                    
                    <!-- <h6>Cantidad recaudada</h6>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
                    </div> -->
                </div>
                <div class="card-footer">
                    <small class="text-muted">Fecha pulicación: {{solicitud_insumo.fc|date:"d/m/Y"}}</small>
                    <a href="" type="button" class="btn btn-primary btn-user bg-gradient-primary text-gray-100" style="float: right;">Donar</a>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="card-deck">
            {% for solicitud_monetaria in solicitudes_monetarias %}
            <div class="card shadow w-50">
                <div class="card-header py-3">
                    <h5 class="m-0 font-weight-bold text-gray-800">{{solicitud_monetaria.titulo}}</h5>
                    <h6 class="card-subtitle">Donación Monetaria</h6>
                </div>
                <div class="card-body">
                    <!-- <div id="Foto">
                        <img class="img-profile rounded-circle" src="{{ solicitud_monetaria.pedido }}">
                    </div> -->

                    <div id="Destinatario">
                        <label class="text-gray-900"> Destinatario:  </label>
                        {% if solicitud_monetaria.uc.username and solicitud_monetaria.uc.apellido %}
                        <label >{{ solicitud_monetaria.uc.username}} {{ solicitud_monetaria.uc.apellido }} </label>
                        {% else %}
                        <label >{{ solicitud_monetaria.uc.username}}</label>
                        {% endif %}
                        {% if solicitud_monetaria.uc.telefono %}
                        <br><label class="text-gray-900"> Telefono:  </label>
                        <label >{{ solicitud_monetaria.uc.telefono }}</label>
                        {% else %}
                        <br><label class="text-gray-900"> Email:  </label>
                        <label >{{ solicitud_monetaria.uc.email }}</label>
                        {% endif %}
                    </div> 
                    <div id= "cantidad_recaudada">
                        <label class="text-gray-900"> Cantidad a recaudar:  </label>
                        <label >{{ solicitud_monetaria.monto }}</label>
                    </div>

                    <!-- <h6>Cantidad recaudada</h6>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
                    </div> -->
                </div>
                <div class="card-footer">
                    <small class="text-muted">Fecha pulicación: {{ solicitud_monetaria.fc|date:"d/m/Y" }}</small>
                    <a href="" type="button" class="btn btn-primary btn-user bg-gradient-primary text-gray-100" style="float: right;">Donar</a>
                </div>
            </div>
            {% endfor %}

        </div>
        {% endif %}
</div>
<!-- /.container-fluid -->
{% endblock %}